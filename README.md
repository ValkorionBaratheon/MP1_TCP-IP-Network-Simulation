# Machine Problem 1: TCP/IP Network Simulation
This is Machine Problem 1, which simulates delays in a TCP/IP server-client relationship.
   
This program documentation consists of the following sections:
1. Program Design
2. Code Flow of mp1.go
3. How to Run
  
## Program Design
### File Structure
This program consists of two files: 
- ``config.txt``
- ``mp1.go`` (later built into an executable called ``mp1.exe``)
  
### Overview of config.txt
This file contains the minimum and maximum delays (in milliseconds), as well as two processes (at the time of writing), each consisting of a process ID (PID), IP address, and port number.
  
### Overview of mp1.go
This file is responsible for reading the contents of ``config.txt``. With command-line input, it starts processes that constantly wait for messages to be received from another process. These messages are also generated by user input. 
#### Process Type and Reading config.txt
A key component of this file is the creation of the Process type. Its fields consist of IP address, port number, minimum delay, maximum delay, and PID. It also maps remote process IDs to IPs and ports. After the program reads and parses ``config.txt``, the values are stored according to the Process type.
#### Sending Messages
Utilizing goroutines, the program handles sending messages by implementing ``unicast_send`` functionality. A specific process will take a command in the terminal. This command, ``send`` will take ``destination`` and ``message`` parameters, and will send a message to the destination process, with a system message outputting the time stamp.
  
#### Receiving Messages
Utilizing goroutines, the program handles receiving messages by implementing ``unicast_receive`` functionality. Each process will constantly be waiting for another process to dial it. When that happens, it will send a system message outputting the message received with a time stamp.
  
## Code Flow
### Process Type
Please see the earlier section under ``Overview of mp1.go``. You will see ``type Process struct`` in the code.
### Reading config.txt
``get_delay()``, ``get_config_file()``, ``read_remote_processes()``, and ``read_config()`` all deal with reading ``config.txt`` and extracting the relevant information, mapping the remote processes.
### Sending Messages
Three functions, ``get_command()``, ``recv_commands()``, and ``unicast_send()`` work together to send messages to another process. The first parses the commands from the command-line, returning the ``destination`` and ``message`` parameters of the ``send`` command. Then, the second function receives those parameters, and calls upon the third function to finally perform the command. In other words, ``unicast_send()`` dials the destination process and sends the user-generated message. This function is called by ``recv_commands()``, which is a goroutine that continuously awaits user-input. This logs and outputs the event with a timestamp.
### Receiving Messages
Two functions, ``recv_messages()`` and ``unicast_recv()``, work together to receive messages from another process. The first function is constantly listening on its given port. It calls upon ``unicast_recv()`` to read the detected message and source, logging and outputting the event with a timestamp.
  
## How To Run
1. Open a terminal. 
2. In the terminal, navigate to the project folder. 
3. Input the following command to build the executable: ``go build mp1.go``.
4. Input the following command: ``./mp1 [PID]``. PID should be a single integer corresponding to the desired process you wish to start (1 or 2).
5. Open a second terminal and navigate to the project folder.
6. Repeat step 4.
7. In each terminal, input the following command: ``send [PID] [message]``. The message can be any string.  
  
*Note: The processes will display send and receive messages with time stamps in their respective terminals.*
